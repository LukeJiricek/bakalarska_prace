{% extends "base.html" %}
{% block section %}
    <div id="image-grid" class="grid-content-2xfr">
        <article id="image-article">
            <img id="image" class="highlight" src="{{ current_image }}">
            <p id="image_source">
                    {{ title }}, {{ author }}, licensed under Creative Commons
            </p>
        </article>
        <article class="article-grid highlight">
            <h3>Jak dotazník vyplňovat</h3>
            <section class="accordion">
                <p>
                V dotazníku se nachází objekt na obrázku a seznam vybraných vlastností. Váš úkol je rozhodnout, zda daná vlasnost popisuje objekt na obrázku. Pokud vlastnost popisuje objekt, vyberte odškrknutí ("fajfka"). Pokud si nejste jistí, nebo vlastnost objekt nepopisuje, vyberte křížek.
                </p>
                <p>
                   <b><i>„Je objekt na obrázku ________?“</i></b> <b><i>„Ano / Ne“</i></b>
                </p>
            </section>
        </article>
        <form method="POST" id="attribute-form" class="article-grid highlight">
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[0] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-0" value="false" onchange="handleChangeRadio(0)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-0" value="true" onchange="handleChangeRadio(0)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[1] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-1" value="false" onchange="handleChangeRadio(1)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-1" value="true" onchange="handleChangeRadio(1)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[2] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-2" value="false" onchange="handleChangeRadio(2)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-2" value="true" onchange="handleChangeRadio(2)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[3] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-3" value="false" onchange="handleChangeRadio(3)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-3" value="true" onchange="handleChangeRadio(3)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[4] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-4" value="false" onchange="handleChangeRadio(4)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-4" value="true" onchange="handleChangeRadio(4)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[5] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-5" value="false" onchange="handleChangeRadio(5)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-5" value="true" onchange="handleChangeRadio(5)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[6] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-6" value="false" onchange="handleChangeRadio(6)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-6" value="true" onchange="handleChangeRadio(6)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[7] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-7" value="false" onchange="handleChangeRadio(7)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-7" value="true" onchange="handleChangeRadio(7)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[8] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-8" value="false" onchange="handleChangeRadio(8)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-8" value="true" onchange="handleChangeRadio(8)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[9] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-9" required value="false" onchange="handleChangeRadio(9)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-9" required value="true" onchange="handleChangeRadio(9)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[10] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-10" required value="false" onchange="handleChangeRadio(10)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-10" required value="true" onchange="handleChangeRadio(10)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <div class="attribute-toggle">
                <h4 class="attribute-toggle-title">{{ attributes[11] }}</h4>
                <div class="tw-toggle">
                    <input type="radio" name="toggle-11" required value="false" onchange="handleChangeRadio(11)">
                    <label class="toggle toggle-no"><i class="fa fa-times fa-lg"></i></label>
                    <input type="radio" name="toggle-11" required value="true" onchange="handleChangeRadio(11)">
                    <label class="toggle toggle-yes"><i class="fa fa-check fa-lg"></i></label>
                    <span></span>
                </div>
            </div>
            <button id="submit" type="submit" disabled onclick="post_request()">Odeslat</button>
            <input type="hidden" name="imageID" value="{{ image_ID }}">
            <input type="hidden" name="requestID" value="{{ request_ID }}">
        </form>
        <script>
            const filledRadios = [];
            function handleChangeRadio(radioName) {
                if(filledRadios.indexOf(radioName) === -1) {
                    filledRadios.push(radioName);
                }
                if(filledRadios.length === 12) {
                    document.getElementById("submit").disabled = false;
                    return;
                }
                document.getElementById("submit").disabled = true;
            }
            function post_request() {
                document.getElementById("attribute-form").style.pointerEvents = "none";
                document.getElementById("attribute-form").style.opacity = "0.7";
            }
        </script>
    <div>
{% endblock %}